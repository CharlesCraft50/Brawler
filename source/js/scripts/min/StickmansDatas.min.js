var Stuff_Block=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"orb_blue"),a.physics.arcade.enable(this),this.body.gravity.y=2500,setTimeout(function(){this.kill()}.bind(this),1e4),massCameraCull("sprite",this)};Stuff_Block.prototype=Object.create(Phaser.Sprite.prototype),Stuff_Block.prototype.constructor=Stuff_Block,Stuff_Block.prototype.update=function(){game.physics.arcade.overlap(this,player,function(a,b){0==b.counter&&(this.kill(),b.randomNumber=game.rnd.integerInRange(0,30),b.randomNumber>18&&b.randomNumber<20?"nothing"==b.holding&&new Weapons("powerUp_2x",!1,b,!0):b.randomNumber>5&&b.randomNumber<10?"nothing"==b.holding&&new Weapons("pistol",!0,b,!0,400,15):b.randomNumber>11&&b.randomNumber<14?"nothing"==b.holding&&new Weapons("desert_eagle",!0,b,!0,400,8):b.randomNumber>25&&b.randomNumber<30?"nothing"==b.holding&&new Weapons("null_gravity",!0,b,!0,400,5):b.randomNumber>1&&b.randomNumber<5?"nothing"==b.holding&&new Weapons("uzi",!0,b,!0,400,5):b.randomNumber>21&&b.randomNumber<28?"nothing"==b.holding&&new Weapons("addHealth",!1,b,!0,400):"nothing"==b.holding&&new Weapons("counter_0",!1,b,!0),b.counter++)}.bind(this)),game.physics.arcade.overlap(this,enemies,function(a,b){0==b.counter&&(this.kill(),b.randomNumber=game.rnd.integerInRange(0,30),b.randomNumber>18&&b.randomNumber<20?"nothing"==b.holding&&new Weapons("powerUp_2x",!1,b,!1):b.randomNumber>5&&b.randomNumber<10?"nothing"==b.holding&&new Weapons("pistol",!0,b,!1,400,15):b.randomNumber>11&&b.randomNumber<14?"nothing"==b.holding&&new Weapons("desert_eagle",!0,b,!1,400,8):b.randomNumber>25&&b.randomNumber<30?"nothing"==b.holding&&new Weapons("null_gravity",!0,b,!1,400,5):b.randomNumber>1&&b.randomNumber<5?"nothing"==b.holding&&new Weapons("uzi",!0,b,!1,400,5):b.randomNumber>21&&b.randomNumber<28?"nothing"==b.holding&&new Weapons("addHealth",!1,b,!1,400):"nothing"==b.holding&&new Weapons("counter_0",!1,b,!1),b.counter++)}.bind(this)),collideWithTilemap(!0,this)},Level1.prototype.createStuff_Block=function(a,b){var c=stuff_blocks;if(this.MAX_STUFF_BLOCKS!=c.countLiving())return c&&(c=new Stuff_Block(this.game,a,b),stuff_blocks.add(c)),c};var Weapons=function(a,b,c,d,e,f){var g=weapons;if(this.target=c,this.timer=f,""!=a&&1==b&&"nothing"==this.target.holding){if(g){if(1==d){var h=power_ups;h&&(h=new Power_Ups("ammo",this.target,a,this.timer),power_ups.add(h))}g=null==this.timer||0==this.timer||void 0==this.timer?new createWeapon(a,e,game,this.target):new createWeapon(a,e,game,this.target,f),weapons.add(g),this.target.holding=a}return g}if("powerUp_2x"==a&&"powers"!=this.target.holding&&0==b&&"nothing"==this.target.holding){if(this.target.punch_damage=2,this.target.holding="powers",this.target.tint=13434879,game.add.tween(this.target.scale).to({x:1.3,y:1.2},500,Phaser.Easing.Back.Out,!0,0),setTimeout(function(){this.target.punch_damage=.5,game.add.tween(this.target.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,0),this.target.tint=16777215,this.target.holding="nothing",this.target.counter=0}.bind(this),6e3),1==d){var h=power_ups;h&&(h=new Power_Ups("timer",this.target,a,5),power_ups.add(h))}}else"addHealth"==a&&"powers"!=this.target.holding&&0==b&&"nothing"==this.target.holding?(1!=healthFull||0==healthBar_Red.cameraOffset.x||healthBar_Red.cameraOffset.x>0)&&(0===this.target.counter&&(this.target==player?playerAddHealthBar(50):this.target.health+=10,this.target.counter++),setTimeout(function(){this.target.holding="nothing",this.target.counter=0}.bind(this),6e3)):"counter_0"==a&&0==b&&setTimeout(function(){this.target.holding="nothing",this.target.counter=0}.bind(this),500)};Weapons.prototype=Object.create(Phaser.Sprite.prototype),Weapons.prototype.constructor=Weapons;var createWeapon=function(a,b,c,d,e){this.target=d,this.weapon_name=a,this.ammo=e,this.speed=b,this.target.bodyAnimation.playAnimationByName("walk_hold"),this.weapon_name&&("pistol"==this.weapon_name?(this.target.bullet=c.add.weapon(100,"bullet_1"),this.target.weaponTime=500,Phaser.Sprite.call(this,c,0,0,"pistol"),c.physics.arcade.enable(this),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.target.weapon=this,this.target.weapon.name=this.weapon_name,this.target.bullet.trackSprite(this.target.weapon,0,this.body.y-5),null==this.ammo||0==this.ammo||void 0==this.ammo?this.target.weaponAmmo=30:this.target.weaponAmmo=this.ammo,this.target.bodyAnimation.onPointUpdated.add(function(a,b){var c=b.transformed;"left"==this.target.facing?(this.position.set(a.x+c.x*-.14,a.y+.14*c.y),this.scale.x=-1):(this.position.set(a.x+.14*c.x,a.y+.14*c.y),this.scale.x=1)},this)):"desert_eagle"==this.weapon_name?(this.target.bullet=c.add.weapon(100,"bullet_1"),this.target.weaponTime=1e3,Phaser.Sprite.call(this,c,0,0,"desert_eagle"),c.physics.arcade.enable(this),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.target.weapon=this,this.target.weapon.name=this.weapon_name,this.target.bullet.trackSprite(this.target.weapon,0,this.body.y-5),null==this.ammo||0==this.ammo||void 0==this.ammo?this.target.weaponAmmo=10:this.target.weaponAmmo=this.ammo,this.target.bodyAnimation.onPointUpdated.add(function(a,b){var c=b.transformed;"left"==this.target.facing?(this.position.set(a.x+c.x*-.14,a.y+.14*c.y),this.scale.x=-1):(this.position.set(a.x+.14*c.x,a.y+.14*c.y),this.scale.x=1)},this)):"null_gravity"==this.weapon_name?(this.target.bullet=c.add.weapon(100,"orb_magical_orange"),this.target.weaponTime=1e3,Phaser.Sprite.call(this,c,0,0,"null_gravity"),c.physics.arcade.enable(this),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.target.weapon=this,this.target.weapon.name=this.weapon_name,this.target.bullet.trackSprite(this.target.weapon,0,this.body.y-5),null==this.ammo||0==this.ammo||void 0==this.ammo?this.target.weaponAmmo=5:this.target.weaponAmmo=this.ammo,this.target.bodyAnimation.onPointUpdated.add(function(a,b){var c=b.transformed;"left"==this.target.facing?(this.position.set(a.x+c.x*-.14,a.y+.14*c.y),this.scale.x=-1):(this.position.set(a.x+.14*c.x,a.y+.14*c.y),this.scale.x=1)},this)):"uzi"==this.weapon_name&&(this.target.bullet=c.add.weapon(100,"bullet_1"),this.target.weaponTime=100,Phaser.Sprite.call(this,c,0,0,"uzi"),c.physics.arcade.enable(this),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.target.weapon=this,this.target.weapon.name=this.weapon_name,this.target.bullet.trackSprite(this.target.weapon,0,this.body.y-10),null==this.ammo||0==this.ammo||void 0==this.ammo?this.target.weaponAmmo=20:this.target.weaponAmmo=this.ammo,this.target.bodyAnimation.onPointUpdated.add(function(a,b){var c=b.transformed;"left"==this.target.facing?(this.position.set(a.x+c.x*-.14,a.y+.14*c.y),this.scale.x=-1):(this.position.set(a.x+.14*c.x,a.y+.14*c.y),this.scale.x=1)},this)),1==this.target.alive&&(this.target.bullet.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,this.target.bullet.bulletAngleOffset=90,this.target.bullet.bulletSpeed=700,this.target.bullet.fireRate=60),this.alive=!0,this.anchor.setTo(.5,.5),this.events.onOutOfBounds.add(function(){this.destroy()},this),this.checkWorldBounds=!0)};createWeapon.prototype=Object.create(Phaser.Sprite.prototype),createWeapon.prototype.constructor=createWeapon,createWeapon.prototype.update=function(){1==this.target.alive?1==this.alive&&this.weapon_name&&1==this.target.alive&&(0==this.target.weaponAmmo&&(this.target.holding="nothing",this.target.counter=0,this.destroy(),this.alive=!1),"pistol"==this.weapon_name?1==this.target.alive&&(this.target==player?game.physics.arcade.collide(this.target.bullet.bullets,enemies,function(a,b){a.kill(),b.damage(!0,8)}.bind(this)):game.physics.arcade.collide(this.target.bullet.bullets,player,function(a,b){b.kill(),playerSubtractHealthBar(8)}.bind(this))):"desert_eagle"==this.weapon_name?1==this.target.alive&&(this.target==player?game.physics.arcade.collide(this.target.bullet.bullets,enemies,function(a,b){a.kill(),b.damage(!0,20)}.bind(this)):game.physics.arcade.collide(this.target.bullet.bullets,player,function(a,b){b.kill(),playerSubtractHealthBar(20)}.bind(this))):"null_gravity"==this.weapon_name?1==this.target.alive&&(this.target==player?enemies.forEachAlive(function(a){game.physics.arcade.collide(this.target.bullet.bullets,a,function(a,b){b.kill(),a.damage(!0,5),a.body.gravity.y=-200,a.scale.y*=-1,a.upsidedown=!0,setTimeout(function(){a.body.gravity.y=2e3,a.scale.y=1,a.upsidedown=!1},5e3)}.bind(this))},this):game.physics.arcade.collide(this.target.bullet.bullets,player,function(a,b){b.kill(),playerSubtractHealthBar(5),a.body.gravity.y=-200,a.scale.y*=-1,a.upsidedown=!0,setTimeout(function(){a.body.gravity.y=2e3,a.scale.y=1,a.upsidedown=!1},5e3)}.bind(this))):"uzi"==this.weapon_name&&1==this.target.alive&&(this.target==player?game.physics.arcade.collide(this.target.bullet.bullets,enemies,function(a,b){a.kill(),b.damage(!0,3)}.bind(this)):game.physics.arcade.collide(this.target.bullet.bullets,player,function(a,b){b.kill(),playerSubtractHealthBar(3)}.bind(this)))):this.body.gravity.y=1e4};var Power_Ups=function(a,b,c,d){this.target=b,this.target.weaponType=a,this.mainTarget=c,"timer"==this.target.weaponType?(Phaser.Sprite.call(this,game,0,50,this.mainTarget),game.physics.arcade.enable(this),this.body.gravity.y=1e3,this.body.collideWorldBounds=!0,this.fixedToCamera=!0,this.timer=d,this.timerText=game.add.bitmapText(this.body.x+16,this.body.y+38,"BatmanForeverAlternate",d,10),this.timerText.fixedToCamera=!0,setInterval(function(){this.timer!=-1&&this.timer--}.bind(this),1e3)):"ammo"==this.target.weaponType&&(Phaser.Sprite.call(this,game,0,50,this.mainTarget+"_box"),game.physics.arcade.enable(this),this.body.gravity.y=1e3,this.body.collideWorldBounds=!0,this.fixedToCamera=!0,this.timer=d,this.timerText=game.add.bitmapText(this.body.x+16,this.body.y+38,"BatmanForeverAlternate",this.target.weaponAmmo,10),this.timerText.fixedToCamera=!0)};Power_Ups.prototype=Object.create(Phaser.Sprite.prototype),Power_Ups.prototype.constructor=Power_Ups,Power_Ups.prototype.update=function(){"timer"==this.target.weaponType?this.timer!=-1?this.timerText.setText(this.timer):(this.kill(),this.timerText.kill()):"ammo"==this.target.weaponType&&(0!=this.target.weaponAmmo?this.timerText.setText(this.target.weaponAmmo):(this.kill(),this.timerText.kill()))};var Enemy_1=function(a,b,c,d,e){Phaser.Sprite.call(this,a,d,e,"stickman_box"),this.bodyAnimation=new Spriter.SpriterGroup(a,spriterData,"stickman_2","Player",0,200),a.world.add(this.bodyAnimation),a.physics.arcade.enable(this.bodyAnimation),this.bodyAnimation.scale.setTo(.14,.14),audios(this),this.breathing=!1,this.alive=!0,this.health=c,this.punchedCount=0,this.punch_damage=.5,this.holding="nothing",this.counter=0,this.randomNumber=0,this.anchor.setTo(.5,1),this.timeCheck=a.time.time,this.timeCheckPunching=a.time.time,this.animCounter=0,this.timeCheckBreathing=a.time.time,this.fallCounter=0,this.fallDoneCounter=0,this.soundCounter=0,this.jumps=0,this.punching=!1,this.jumping=!1,a.physics.arcade.enable(this),this.body.gravity.y=2e3,this.checkWorldBounds=!0,this.body.collideWorldBounds=!0,this.weaponTime=!1,this.spawnPointTime=a.time.time,this.weapon=!1,this.upsidedown=!1,this.weapon.name="",this.soundStart=!1,this.weaponAmmo=0,this.weaponType="null",this.body.fixedRotation=!0,this.body.damping=.5,this.healthBar=a.add.bitmapText(0,0,"BatmanForeverAlternate","HP: "+this.health+"%",10),this.healthBar.position.y=this.healthBar.position.y-80,a.physics.arcade.enable(this.healthBar),massCameraCull("sprite",this)};Enemy_1.prototype=Object.create(Phaser.Sprite.prototype),Enemy_1.prototype.constructor=Enemy_1,Enemy_1.prototype.move=function(){"nothing"!=this.holding?(this.body.velocity.x<0?(this.bodyAnimation.scale.setTo(-.14,.14),this.facing="left"):this.body.velocity.x>0&&this.body.velocity.y<150&&this.body.velocity.y>0&&(this.bodyAnimation.scale.setTo(.14,.14),this.facing="right"),getPowDistance(!1,!0,0,this.body.y,0,player.body.y)>88e3&&this.jump(),"nothing"!=this.holding&&"powers"!=this.holding?game.physics.arcade.distanceBetween(player,this)<800?(this.body.velocity.x=0,this.animations.play("aim"),this.punch()):(moveToObjectAdvance(this,player,500,0,!0,!1),this.bodyAnimation.setAnimationSpeedPercent(200),0==this.animCounter&&(this.bodyAnimation.playAnimationByName("walk"),this.AnimationUpdate=!0,this.animCounter++)):moveToObjectAdvance(this,player,500,0,!0,!1),"left"==this.facing&&this.body.x<player.body.x?(this.facing="right",this.bodyAnimation.scale.setTo(.14,.14)):"right"==this.facing&&this.body.x>player.body.x&&(this.facing="left",this.bodyAnimation.scale.setTo(-.14,.14))):(0!=this.enemyMoves&&(game.physics.arcade.distanceBetween(player,this)<500?(moveToObjectAdvance(this,player,300,0,!0,!1),this.bodyAnimation.setAnimationSpeedPercent(200),0==this.animCounter&&(this.bodyAnimation.playAnimationByName("walk"),this.AnimationUpdate=!0,this.animCounter++)):stuff_blocks.forEachAlive(function(a){getPowDistance(!0,!0,this.body.x,this.body.y,a.body.x,a.body.y)<1e4?moveToObjectAdvance(this,a,300,0,!0,!1):moveToObjectAdvance(this,a,500,0,!0,!1)},this),this.body.velocity.x<0?(this.bodyAnimation.scale.setTo(-.14,.14),this.facing="left"):this.body.velocity.x>0&&this.body.velocity.y<150&&this.body.velocity.y>0&&(this.bodyAnimation.scale.setTo(.14,.14),this.facing="right")),stuff_blocks.forEachAlive(function(a){getPowDistance(!1,!0,0,this.body.y,0,a.body.y)>88e3&&this.jump()},this))},Enemy_1.prototype.damage=function(c,d){return 1==c?this.health-=d:this.health-=player.punch_damage,this.health<=0&&(this.alive=!1,a=parseInt(localStorage.getItem("coins"))+1,b=localStorage.setItem("coins",a),player.coinsCounter=0,this.destroy(),this.bodyAnimation.destroy(),this.healthBar.destroy(),this.holding="nothing",!0)},Enemy_1.prototype.punch=function(){"nothing"!=this.holding&&"powers"!=this.holding?(0!=this.weaponTime&&("left"==this.facing?this.bullet.fireAngle=Phaser.ANGLE_LEFT:this.bullet.fireAngle=Phaser.ANGLE_RIGHT,game.time.time-this.timeCheck>this.weaponTime&&(this.bullet.fire(),0!=this.weaponAmmo&&this.weaponAmmo--,1==this.weapon.alive&&(this.weapon.frame=1,1!=this.soundStart&&(this.soundStart=!0),setTimeout(function(){this.weapon.frame=0}.bind(this),500)),this.timeCheck=game.time.time)),1==this.soundStart&&0==this.soundCounter&&(this.weapons_sounds[this.weapon.name].play(),this.soundCounter++)):1==player.alive&&("right"==this.facing?(this.bodyAnimation.scale.setTo(.14,.14),this.bodyAnimation.setAnimationSpeedPercent(200),this.AnimationUpdate=!0,game.time.time-this.timeCheckPunching>=1e3&&(this.bodyAnimation.playAnimationByName("punch"),this.timeCheckPunching=game.time.time),this.punching=!0,"left"==player.facing?(player.body.x+=3,player.body.y-=3):(player.body.x-=3,player.body.y-=3)):(this.bodyAnimation.scale.setTo(-.14,.14),this.bodyAnimation.setAnimationSpeedPercent(200),this.AnimationUpdate=!0,game.time.time-this.timeCheckPunching>=1e3&&(this.bodyAnimation.playAnimationByName("punch"),this.sound_effects.punch.play(),this.timeCheckPunching=game.time.time),this.punching=!0,"right"==player.facing?(player.body.x+=3,player.body.y-=3):(player.body.x-=3,player.body.y-=3)))},Enemy_1.prototype.jump=function(){this.body.onFloor()&&1==this.jumping&&(this.jumps=0,"nothing"!=this.holding&&"powers"!=this.holding?this.bodyAnimation.playAnimationByName("walk_hold"):this.bodyAnimation.playAnimationByName("walk")),this.body.onFloor()?(this.fallCounter=0,0==this.fallDoneCounter&&(this.bodyAnimation.setAnimationSpeedPercent(100),"nothing"!=this.holding&&"powers"!=this.holding?this.bodyAnimation.playAnimationByName("walk_hold"):this.bodyAnimation.playAnimationByName("walk"),this.AnimationUpdate=!0,this.fallDoneCounter++)):(this.fallDoneCounter=0,this.bodyAnimation.setAnimationSpeedPercent(300),0==this.fallCounter&&("nothing"!=this.holding&&"powers"!=this.holding?this.bodyAnimation.playAnimationByName("walk_hold"):this.bodyAnimation.playAnimationByName("walk"),this.AnimationUpdate=!0,this.fallCounter++)),this.jumps<5&&this.body.onFloor()&&(this.bodyAnimation.setAnimationSpeedPercent(200),0==this.AnimationUpdate&&(this.bodyAnimation.playAnimationByName("jump_start"),this.AnimationUpdate=!0,this.animCounter++),this.body.velocity.x=1,this.body.velocity.y=-1280,this.jumps++,this.jumping=!0)},Enemy_1.prototype.update=function(){1==this.breathing?this.bodyAnimation.position.setTo(this.body.x+15,this.body.y+40):this.bodyAnimation.position.setTo(this.body.x+15,this.body.y+45),collideWithTilemap(!0,this),1==this.AnimationUpdate?(this.bodyAnimation.updateAnimation(),this.breathing=!1):null==this.AnimationUpdate||(this.bodyAnimation.updateAnimation(),this.bodyAnimation.setAnimationSpeedPercent(100),game.time.time-this.timeCheckBreathing>=1e3&&("nothing"!=this.holding&&"powers"!=this.holding?this.bodyAnimation.playAnimationByName("idle_hold"):this.bodyAnimation.playAnimationByName("idle"),this.breathing=!0,this.timeCheckBreathing=game.time.time)),1==this.alive&&(this.healthBar.body.x=this.body.x,this.healthBar.body.y=this.body.y),checkOverlap(this,player)?(1==playerPunching?(this.body.velocity.x<0?(this.body.x+=30,this.body.y-=30):this.body.velocity.x>0&&(this.body.x-=30,this.body.y-=30),this.damage()):playerPunching=!1,setTimeout(function(){this.punch()}.bind(this),100),this.enemyMoves=!1,this.health>0&&(this.body.velocity.x=0)):(this.punching=!1,this.enemyMoves=!0,this.move(),this.immovable=!1),0!=this.punching&&1==this.alive&&this.health>0&&checkOverlap(this,player)&&playerSubtractHealthBar(this.punch_damage),"nothing"==this.holding&&this.counter>0&&(this.counter=0),this.healthBar.setText("HP: "+this.health+"%")},Level1.prototype.createEnemy_1=function(a,b){var c=enemies;if(c){var d=this.game.rnd.integerInRange(5,100);c=new Enemy_1(this.game,player,d,a,b),enemies.add(c)}return c},Level1.prototype.createEnemy_2=function(a,b){var c=enemies.getFirstDead();return null===c&&(c=new Enemy_1(this.game,player,this.game.rnd.integerInRange(5,20),a,b),enemies.add(c)),c.revive(),c},Level1.prototype.showerEnemies=function(a,b){var c=enemies;return this.game.add.existing(c=new Enemy_1(this.game,player,this.game.rnd.integerInRange(5,20))),c.x=a,c.y=b,c};var NPC=function(a,b,c,d,e,f,g){this.moves=f,this.direction=g,this.speed=e,Phaser.Sprite.call(this,a,b,c,"stickman_box"),this.bodyAnimation=new Spriter.SpriterGroup(a,d,"stickman_1","Player",0,200),a.world.add(this.bodyAnimation),a.physics.arcade.enable(this.bodyAnimation),this.bodyAnimation.scale.setTo(.14,.14),a.physics.arcade.enable(this),this.alive=!0,this.body.gravity.y=2e3,this.animCounter=0,this.killCounter=0,this.timeCheckBreathing=a.time.time,massCameraCull("sprite",this)};NPC.prototype=Object.create(Phaser.Sprite.prototype),NPC.prototype.constructor=NPC,NPC.prototype.update=function(){1==this.alive&&(this.bodyAnimation.position.setTo(this.body.x+15,this.body.y+40),collideWithTilemap(!0,this),1==this.AnimationUpdate?this.bodyAnimation.updateAnimation():null==this.AnimationUpdate||(this.bodyAnimation.updateAnimation(),this.bodyAnimation.setAnimationSpeedPercent(100),game.time.time-this.timeCheckBreathing>=1e3&&(this.bodyAnimation.playAnimationByName("idle"),this.timeCheckBreathing=game.time.time)),"walk"==this.moves?(0==this.direction?(this.bodyAnimation.scale.setTo(-.14,.14),this.body.velocity.x=-this.speed):(this.bodyAnimation.scale.setTo(.14,.14),this.body.velocity.x=this.speed),this.bodyAnimation.setAnimationSpeedPercent(this.speed),0==this.animCounter&&(this.bodyAnimation.playAnimationByName("walk"),this.AnimationUpdate=!0,this.animCounter++)):"idle"==this.moves&&(this.AnimationUpdate=!1),(this.body.x>1610||this.body.x<-30)&&(this.alive=!0,this.destroy(),this.bodyAnimation.destroy()))},Level1.prototype.createNPC=function(a,b,c,d,e,f){var g=NPCGroup;return g&&(g=new NPC(this.game,a,b,c,d,e,f),NPCGroup.add(g)),g};var Player=function(a,b,c,d){Phaser.Sprite.call(this,a,b,c,"stickman_box"),player=this,a.physics.enable(player,Phaser.Physics.ARCADE),a.camera.follow(player,Phaser.Camera.FOLLOW_LOCKON),audios(player),player.bodyAnimation=new Spriter.SpriterGroup(a,d,"stickman_3","Player",0,200),a.world.add(player.bodyAnimation),a.physics.arcade.enable(player.bodyAnimation),player.bodyAnimation.scale.setTo(.14,.14),player.body.gravity.y=2e3,player.body.collideWorldBounds=!0,a.physics.arcade.checkCollision.bottom=!1,a.physics.arcade.checkCollision.top=!1,player.breathing=!1,player.jumps=0,player.jumping=!1,player.standing_up=!1,player.doubleTapped=!1,player.punch_damage=1,player.facing="idle",player.holding="nothing",player.counter=0,player.randomNumber=0,player.animCounter=0,player.fallCounter=0,player.fallDoneCounter=0,player.crouchIdleCounter=0,player.coinsCounter=0,player.soundCounter=0,player.alive=!0,player.anchor.setTo(.5,.5),player.timeCheck=a.time.time,player.timeCheckBreathing=a.time.time,player.timeCheckPunching=a.time.time,player.timeCheckPunched=a.time.time,player.timeCheckCrouch=a.time.time,player.AnimationUpdate=!1,player.weaponTime=!1,player.crouching=!1,player.weapon=!1,player.upsidedown=!1,player.weapon.name="",player.soundStart=!1,player.weaponAmmo=0,player.weaponType="null",player.coins=a.add.bitmapText(700,10,"BatmanForeverOutline","Coins: "+localStorage.getItem("score"),20),player.coins.fixedToCamera=!0,a.world.bringToTop(weapons),a.world.bringToTop(map_tiles_4),a.world.bringToTop(stuff_blocks),a.world.bringToTop(spawnPoint),streetLightBeam_effect.forEachAlive(function(a){streetLightBeam_group.add(new streetLightBeam(this.game,a.x+13,a.y+260)),massCameraCull("group",streetLightBeam_group)})};Player.prototype=Object.create(Phaser.Sprite.prototype),Player.prototype.constructor=Player,Player.prototype.update=function(){"nothing"==player.holding&&0!=player.weapon&&(player.weapon.kill(),player.weaponAmmo=0),0==player.coinsCounter&&(player.coins.setText("Coins: "+parseInt(localStorage.getItem("coins"))),player.coinsCounter++),1==player.breathing?player.bodyAnimation.position.setTo(player.body.x+15,player.body.y+40):player.bodyAnimation.position.setTo(player.body.x+15,player.body.y+45),collideWithTilemap(!0,player),1==player.AnimationUpdate?(player.bodyAnimation.updateAnimation(),player.breathing=!1):null==player.AnimationUpdate||(player.bodyAnimation.updateAnimation(),player.bodyAnimation.setAnimationSpeedPercent(100),game.time.time-player.timeCheckBreathing>=1e3&&0==player.doubleTapped&&("nothing"!=player.holding&&"powers"!=player.holding?player.bodyAnimation.playAnimationByName("idle_hold"):player.bodyAnimation.playAnimationByName("idle"),player.breathing=!0,player.timeCheckBreathing=game.time.time)),1==player.alive&&("nothing"==player.holding&&player.counter>0&&(player.counter=0),cursors.left?(player.bodyAnimation.scale.setTo(-.14,.14),player.body.velocity.x=-200,"left"!=player.facing&&1!=player.crouching&&("nothing"!=player.holding&&"powers"!=player.holding?(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("walk_hold"),player.AnimationUpdate=!0,player.animCounter++)):(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("walk"),player.AnimationUpdate=!0,player.animCounter++)),player.facing="left")):cursors.right?(player.bodyAnimation.scale.setTo(.14,.14),player.body.velocity.x=200,"right"!=player.facing&&1!=player.crouching&&("nothing"!=player.holding&&"powers"!=player.holding?(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("walk_hold"),player.AnimationUpdate=!0,player.animCounter++)):(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("walk"),player.AnimationUpdate=!0,player.animCounter++)),player.facing="right")):(player.body.velocity.x=0,player.animCounter=0,player.AnimationUpdate=!1,"idle"!=player.facing&&1!=player.crouching&&("left"==player.facing?"nothing"!=player.holding&&"powers"!=player.holding?(player.bodyAnimation.scale.setTo(-.14,.14),player.bodyAnimation.setAnimationSpeedPercent(100),player.AnimationUpdate=!1,1==player.jumping&&(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("jump_loop_hold"),player.AnimationUpdate=!0,player.animCounter++))):1==player.jumping?(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("jump_loop"),player.AnimationUpdate=!0,player.animCounter++),player.bodyAnimation.scale.setTo(-.14,.14)):player.bodyAnimation.scale.setTo(-.14,.14):"nothing"!=player.holding&&"powers"!=player.holding?(player.bodyAnimation.scale.setTo(.14,.14),player.bodyAnimation.setAnimationSpeedPercent(100),player.AnimationUpdate=!1,1==player.jumping&&(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("jump_loop_hold"),player.AnimationUpdate=!0,player.animCounter++))):1==player.jumping?(player.bodyAnimation.setAnimationSpeedPercent(100),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("jump_loop"),player.AnimationUpdate=!0,player.animCounter++),player.bodyAnimation.scale.setTo(.14,.14)):player.bodyAnimation.scale.setTo(.14,.14),player.facing=player.facing)),0==player.standing_up?1==player.crouching&&(player.body.velocity.x=0,game.time.time-player.timeCheckCrouch>=1e3&&(player.bodyAnimation.playAnimationByName("crouch_idle"),player.AnimationUpdate=!0,player.timeCheckCrouch=game.time.time)):1==player.crouching&&(player.body.velocity.x=0),1==player.doubleTapped&&(player.body.velocity.x=0),player.body.onFloor()&&1==player.jumping&&(player.jumps=0,player.jumping=!1,cursors.up=!1,"nothing"!=player.holding&&"powers"!=player.holding?player.bodyAnimation.playAnimationByName("walk_hold"):player.bodyAnimation.playAnimationByName("walk")),player.body.onFloor()?(player.fallCounter=0,0==player.fallDoneCounter&&(player.bodyAnimation.setAnimationSpeedPercent(100),"nothing"!=player.holding&&"powers"!=player.holding?player.bodyAnimation.playAnimationByName("walk_hold"):player.bodyAnimation.playAnimationByName("walk"),player.AnimationUpdate=!0,player.fallDoneCounter++)):(player.fallDoneCounter=0,player.bodyAnimation.setAnimationSpeedPercent(300),0==player.fallCounter&&("nothing"!=player.holding&&"powers"!=player.holding?player.bodyAnimation.playAnimationByName("jump_loop_hold"):player.bodyAnimation.playAnimationByName("jump_loop"),player.AnimationUpdate=!0,player.fallCounter++)),cursors.up&&player.jumps<5&&1!=player.crouching&&0==player.doubleTapped&&(player.bodyAnimation.setAnimationSpeedPercent(200),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("jump_start"),player.AnimationUpdate=!0,player.animCounter++),player.body.velocity.x=1,player.body.velocity.y=-1e3,player.jumps++,player.jumping=!0),run&&(cursors.right||cursors.left)&&1!=player.crouching&&("left"==player.facing?(player.bodyAnimation.scale.setTo(-.14,.14),player.body.velocity.x=-500):(player.bodyAnimation.scale.setTo(.14,.14),player.body.velocity.x=500),"nothing"!=player.holding&&"powers"!=player.holding?(player.bodyAnimation.setAnimationSpeedPercent(200),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("walk_hold"),player.AnimationUpdate=!0,player.animCounter++)):(player.bodyAnimation.setAnimationSpeedPercent(200),0==player.animCounter&&(player.bodyAnimation.playAnimationByName("walk"),player.AnimationUpdate=!0,player.animCounter++))),punch&&1!=player.crouching?"nothing"!=player.holding&&"powers"!=player.holding?("left"==player.facing?player.bullet.fireAngle=Phaser.ANGLE_LEFT:player.bullet.fireAngle=Phaser.ANGLE_RIGHT,0!=player.weaponTime&&game.time.time-player.timeCheck>=player.weaponTime&&(player.bullet.fire(),0!=player.weaponAmmo&&player.weaponAmmo--,1==player.weapon.alive&&(player.weapon.frame=1,1!=player.soundStart&&(player.soundStart=!0),setTimeout(function(){player.weapon.frame=0},500)),player.timeCheck=game.time.time)):(game.physics.arcade.collide(player,weapons,function(a,b){b.destroy(),b.alive=!1}),0==punched?("left"==player.facing?player.bodyAnimation.scale.setTo(-.14,.14):player.bodyAnimation.scale.setTo(.14,.14),"left"==player.facing?player.body.velocity.x=-1:player.body.velocity.x=1,player.bodyAnimation.setAnimationSpeedPercent(200),player.AnimationUpdate=!0,game.time.time-player.timeCheckPunching>=1e3&&(player.bodyAnimation.playAnimationByName("punch"),player.sound_effects.punch.play(),player.timeCheckPunching=game.time.time),game.time.time-player.timeCheckPunched>=500?(playerPunching=!0,player.timeCheckPunched=game.time.time):playerPunching=!1):punched=!1):playerPunching=!1),1==player.soundStart&&0==player.soundCounter&&(player.weapons_sounds[player.weapon.name].play(),player.soundCounter++),game.input.keyboard.isDown(Phaser.Keyboard.S)&&game.physics.arcade.collide(player,enemies,function(a,b){b.alive=!1,b.destroy(),b.healthBar.destroy(),b.holding="nothing"})},Level1.prototype.createPlayer=function(a,b,c){var d=playerGroup;return d&&(d=new Player(this.game,a,b,c),playerGroup.add(d)),d};