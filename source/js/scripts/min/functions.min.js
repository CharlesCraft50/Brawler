function gofull(){game.scale.isFullScreen?game.scale.stopFullScreen():game.scale.startFullScreen(!1)}function resetSprite(a){a.x=game.world.bounds.right}function massCameraCull(a,b){if("sprite"==a)b.autoCull=!0,b.checkWorldBounds=!0,b.events.onOutOfBounds.add(resetSprite,this);else{if("group"!=a)throw new Error("massCameraCull: Type not exist!");b.forEachAlive(function(a){a.autoCull=!0,a.checkWorldBounds=!0,a.events.onOutOfBounds.add(resetSprite,this)})}}function getRatio(a,b,c){var d=width/b,e=height/c,f={x:1,y:1};switch(a){case"all":f.x=d>e?e:d,f.y=d>e?e:d;break;case"fit":f.x=d>e?d:e,f.y=d>e?d:e;break;case"fill":f.x=d,f.y=e}return f}function checkOverlap(a,b){var c=a.getBounds(),d=b.getBounds();return Phaser.Rectangle.intersects(c,d)}function getPowDistance(a,b,c,d,e,f){if(1==a&&1!=b){var g=Math.abs(c-e);return g*g}if(1==b&&1!=a){var h=Math.abs(d-f);return h*h}var g=Math.abs(c-e),h=Math.abs(d-f);return g*g+h*h}function chasePlayer(a,b,c){player.alive&&(null!=c?game.physics.arcade.moveToObject(a,player,b,c):game.physics.arcade.moveToObject(a,player,b))}function HUDisplay(){healthBar_Border=game.add.sprite(parseInt(localStorage.getItem("healthBarLevel")),0,"healthBar_Border"),healthBar_Border.fixedToCamera=!0,healthBar_Red=game.add.sprite(parseInt(localStorage.getItem("healthBarLevel")),1,"healthBar_Red"),healthBar_Red.fixedToCamera=!0,game.physics.arcade.enable(healthBar_Red)}function playerSubtractHealthBar(a,b){null!=b?null!=a?(healthBar_Red.cameraOffset.x-=a,whoKilled=b):console.log("playerSubtractHealthBar(): Undefined value"):null!=a?healthBar_Red.cameraOffset.x-=a:console.log("playerSubtractHealthBar(): Undefined value")}function playerAddHealthBar(a){null!=a?1!=healthFull&&(healthBar_Red.cameraOffset.x+=a):console.log("playerSubtractHealthBar(): Undefined value")}function restartGame(){score=0,game.state.start("GameState")}function gameOver(){healthBar_Red.cameraOffset.x=-225,player.kill(),startGame(),player.alive=!1,this.jumps=0,player.jumping=!1,this.MAX_ENEMIES=1,this.MAX_STUFF_BLOCKS=3,this.GRAVITY=2e3,this.ENEMIES_COUNTER=0,enemies.forEachAlive(function(a){a.alive=!1,a.destroy(),a.healthBar.destroy(),a.holding="nothing"})}function getRatio(a,b,c){var d=width/b,e=height/c,f={x:1,y:1};switch(a){case"all":f.x=d>e?e:d,f.y=d>e?e:d;break;case"fit":f.x=d>e?d:e,f.y=d>e?d:e;break;case"fill":f.x=d,f.y=e}return f}collideWithTilemap=function(a,b,c){1==a?(game.physics.arcade.collide(b,world),game.physics.arcade.collide(b,map_tiles_1),game.physics.arcade.collide(b,map_tiles_2),game.physics.arcade.collide(b,map_tiles_3),game.physics.arcade.collide(b,map_tiles_4)):game.physics.arcade.collide(b,c)},moveToObjectAdvance=function(a,b,c,d,e,f){void 0===c&&(c=60),void 0===d&&(d=0);var g=Math.atan2(b.y-a.y,b.x-a.x);return d>0&&(c=this.distanceBetween(a,b)/(d/1e3)),0==e?a.body.velocity.y=Math.sin(g)*c:0==f?a.body.velocity.x=Math.cos(g)*c:(a.body.velocity.y=Math.sin(g)*c,a.body.velocity.x=Math.cos(g)*c),g};var streetLightBeam=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"transparent"),this.anchor.setTo(.5,.5),this.glow=this.game.add.image(b,c,"streetLightBeam"),this.glow.anchor.setTo(.5,.5),this.glow.blendMode=Phaser.blendModes.ADD,this.glow.alpha=.5};streetLightBeam.prototype=Object.create(Phaser.Sprite.prototype),streetLightBeam.prototype.constructor=streetLightBeam,streetLightBeam.prototype.update=function(){};var tilemap=function(){map=game.add.tilemap("map"),map.addTilesetImage("tileset"),map.addTilesetImage("shadows"),map.setCollision(1),map.setCollision(9),map.setTileIndexCallback(9,function(a,b){player.body.y-=10},this),map_tiles_1=map.createLayer("tiles_1"),map_tiles_2=map.createLayer("tiles_2"),map_tiles_3=map.createLayer("tiles_3"),map_tiles_4=map.createLayer("tiles_4"),map_shadow_1=map.createLayer("shadow_1"),map_tiles_1.renderSettings.enableScrollDelta=!1,map_tiles_2.renderSettings.enableScrollDelta=!1,map_tiles_3.renderSettings.enableScrollDelta=!1,map_tiles_4.renderSettings.enableScrollDelta=!1,map_shadow_1.renderSettings.enableScrollDelta=!1,map_tiles_1.resizeWorld(),map_tiles_2.resizeWorld(),map_tiles_3.resizeWorld(),map_tiles_4.resizeWorld(),map_shadow_1.resizeWorld(),map.createFromObjects("objects",72,"streetLightBeam",0,!0,!1,streetLightBeam_effect),map.forEach(function(a){1===a.index&&(a.collideDown=!1,a.collideLeft=!1,a.collideRight=!1)},game,0,0,map.width,map.height,map_tiles_1)},buttonsExecute=function(){run_button=game.add.button(900,500,"run_button",null,this,0,1,0,1),run_button.fixedToCamera=!0,run_button.fixedToCamera=!0,run_button.events.onInputOver.add(function(){run=!0}),run_button.events.onInputOut.add(function(){run=!1}),run_button.events.onInputDown.add(function(){run=!0}),run_button.events.onInputUp.add(function(){run=!1}),punch_button=game.add.button(900,400,"punch_button",null,this,0,1,0,1),punch_button.fixedToCamera=!0,punch_button.events.onInputOver.add(function(){punch=!0}),punch_button.events.onInputOut.add(function(){punch=!1}),punch_button.events.onInputDown.add(function(){punch=!0}),punch_button.events.onInputUp.add(function(){punch=!1}),mute_button=game.add.button(900,10,"mute_button",null,this),mute_button.fixedToCamera=!0,mute_button.events.onInputOver.add(function(){0==game.sound.mute?(game.sound.mute=!0,mute_button.frame=1):(game.sound.mute=!1,mute_button.frame=0)}),mute_button.events.onInputDown.add(function(){0==game.sound.mute?(game.sound.mute=!0,mute_button.frame=1):(game.sound.mute=!1,mute_button.frame=0)}),game.vjoy=game.plugins.add(Phaser.Plugin.VJoy),game.vjoy.inputEnable(),game.vjoy.speed={x:500,y:500}},audios=function(a){null!=a&&(a.sound_effects={},a.sound_effects.punch=game.add.audio("punching_sound"),a.weapons_sounds={},a.weapons_sounds.pistol=game.add.audio("pistol_sound"),a.weapons_sounds.pistol.onStop.add(function(){a.soundStart=!1,a.soundCounter=0},this),a.weapons_sounds.uzi=game.add.audio("uzi_sound"),a.weapons_sounds.uzi.onStop.add(function(){a.soundStart=!1,a.soundCounter=0},this),a.weapons_sounds.null_gravity=game.add.audio("null_gravity_sound"),a.weapons_sounds.null_gravity.onStop.add(function(){a.soundStart=!1,a.soundCounter=0},this),a.weapons_sounds.desert_eagle=game.add.audio("desert_eagle_sound"),a.weapons_sounds.desert_eagle.onStop.add(function(){a.soundStart=!1,a.soundCounter=0},this))};